// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: queries.sql

package db

import (
	"context"
	"time"

	"github.com/lib/pq"
)

const createTemperatureData = `-- name: CreateTemperatureData :many
insert into temp_checker.temperature_data(location_sensor_id, value, timestamp)
select unnest($1::int[]),
       unnest($2::float[]),
       unnest($3::timestamptz[])
returning temperature_data_id
`

type CreateTemperatureDataParams struct {
	LocationSensorIds []int32
	Values            []float64
	Timestamps        []time.Time
}

func (q *Queries) CreateTemperatureData(ctx context.Context, arg CreateTemperatureDataParams) ([]int32, error) {
	rows, err := q.query(ctx, q.createTemperatureDataStmt, createTemperatureData, pq.Array(arg.LocationSensorIds), pq.Array(arg.Values), pq.Array(arg.Timestamps))
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []int32
	for rows.Next() {
		var temperature_data_id int32
		if err := rows.Scan(&temperature_data_id); err != nil {
			return nil, err
		}
		items = append(items, temperature_data_id)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getAPILocationSensors = `-- name: GetAPILocationSensors :many
select ls.location_sensor_id,
       ls.sensor_sid,
       l.location_name,
       l.latitude,
       l.longitude,
       l.location_id
from temp_checker.location_sensor as ls
         join temp_checker.location as l on ls.location_id = l.location_id
where ls.type = 'api'
`

type GetAPILocationSensorsRow struct {
	LocationSensorID int32
	SensorSid        string
	LocationName     string
	Latitude         float64
	Longitude        float64
	LocationID       int32
}

func (q *Queries) GetAPILocationSensors(ctx context.Context) ([]GetAPILocationSensorsRow, error) {
	rows, err := q.query(ctx, q.getAPILocationSensorsStmt, getAPILocationSensors)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetAPILocationSensorsRow
	for rows.Next() {
		var i GetAPILocationSensorsRow
		if err := rows.Scan(
			&i.LocationSensorID,
			&i.SensorSid,
			&i.LocationName,
			&i.Latitude,
			&i.Longitude,
			&i.LocationID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getLocationSensorBySensorId = `-- name: GetLocationSensorBySensorId :one
select ls.location_sensor_id
from temp_checker.location_sensor as ls
         join temp_checker.location as l on ls.location_id = l.location_id
where ls.sensor_sid = $1 and l.location_sid = $2
`

type GetLocationSensorBySensorIdParams struct {
	SensorSid   string
	LocationSid string
}

func (q *Queries) GetLocationSensorBySensorId(ctx context.Context, arg GetLocationSensorBySensorIdParams) (int32, error) {
	row := q.queryRow(ctx, q.getLocationSensorBySensorIdStmt, getLocationSensorBySensorId, arg.SensorSid, arg.LocationSid)
	var location_sensor_id int32
	err := row.Scan(&location_sensor_id)
	return location_sensor_id, err
}
